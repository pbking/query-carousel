{"version":3,"file":"queryCarouselEdit.js","mappings":"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","sources":["webpack://query-carousel/external window [\"wp\",\"blockEditor\"]","webpack://query-carousel/external window [\"wp\",\"blocks\"]","webpack://query-carousel/external window [\"wp\",\"components\"]","webpack://query-carousel/external window [\"wp\",\"data\"]","webpack://query-carousel/external window [\"wp\",\"element\"]","webpack://query-carousel/external window [\"wp\",\"hooks\"]","webpack://query-carousel/external window \"ReactJSXRuntime\"","webpack://query-carousel/webpack/bootstrap","webpack://query-carousel/webpack/runtime/compat get default export","webpack://query-carousel/webpack/runtime/define property getters","webpack://query-carousel/webpack/runtime/hasOwnProperty shorthand","webpack://query-carousel/webpack/runtime/make namespace object","webpack://query-carousel/./src/query-carousel/edit.jsx"],"sourcesContent":["module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"hooks\"];","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { addFilter } from \"@wordpress/hooks\";\nimport { InspectorControls } from \"@wordpress/block-editor\";\nimport { PanelBody, CheckboxControl, FormTokenField  } from \"@wordpress/components\";\nimport { registerBlockVariation } from \"@wordpress/blocks\";\nimport { useSelect } from \"@wordpress/data\";\nimport { useEffect, useRef } from \"@wordpress/element\";\n\nregisterBlockVariation(\"core/query\", {\n\tname: \"carousel-query-loop\",\n\ttitle: \"Carousel Query Loop\",\n\tdescription: \"A Query Loop variation that uses a carousel layout.\",\n\tisActive: [\"namespace\"],\n\ticon: \"images-alt2\",\n\tattributes: {\n\t\tnamespace: \"carousel-query-loop\",\n\t\tclassName: \"is-carousel-query\",\n\t\tisAutoPlay: true,\n\t},\n\tinnerBlocks: [[\"core/post-template\", {}, [[\"core/post-title\", {}]]]],\n\tscope: [\"inserter\"],\n\tkeywords: [\"carousel\", \"slider\", \"query\"],\n});\n\nconst withQueryCarouselControls = (BlockEdit) => (props) => {\n\n\tif ( props.attributes?.namespace !== 'carousel-query-loop' ) {\n\t\treturn <BlockEdit {...props} />\n\t}\n\n\tconst { attributes, setAttributes } = props;\n\tconst queryPostType = attributes?.query?.postType || 'post';\n\tconst selectedPosts = attributes?.query?.selectedPosts || [];\n\tconst initialSelectedPostsRef = useRef(queryPostType);\n\n\tuseEffect(() => {\n\t\tif (initialSelectedPostsRef.current !== queryPostType) {\n\t\t\tsetAttributes({\n\t\t\t\tquery: {\n\t\t\t\t\t...attributes.query,\n\t\t\t\t\tselectedPosts: [],\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}, [attributes?.query?.postType]);\n\n\t// Fetch posts based on the query post type\n\tconst posts = useSelect( (select) =>\n\t\tselect(\"core\").getEntityRecords(\"postType\", queryPostType, { per_page: -1 }),\n\t\t[attributes?.query?.postType]\n\t);\n\n\t// Build an array of options to populate the FormTokenField\n  \tconst postOptions = (posts ?? [])\n\t\t.map( ( post ) => ( post.title.rendered ) )\n  \t\t.sort( ( a, b ) => a.localeCompare( b ) );\n\n\t// Map selected post IDs to their titles for the FormTokenField\n\tconst selectedPostsLabels = posts ? selectedPosts.map( ( postId ) => {\n\t\tconst post = posts.find( ( post ) => post.id === postId );\n\t\treturn post ? post.title.rendered : null;\n\t}) : [];\n\n\tconst onSetPosts = ( values ) => {\n\n\t\tselectedPostsLabels.length = 0;\n\t\tattributes.query.selectedPosts = [];\n\n\t\tif ( ! values || values.length === 0 ) {\n\t\t\tsetAttributes( { query: { ...attributes.query} } );\n\t\t\treturn;\n\t\t}\n\n\t\tselectedPostsLabels.push( ...values );\n\n\t\tattributes.query.selectedPosts = values.map( ( value ) => {\n\t\t\tconst post = posts.find( ( post ) => post.title.rendered === value );\n\t\t\treturn post ? post.id : null;\n\t\t});\n\n\t\tsetAttributes( { query: {\n\t\t\t...attributes.query,\n\t\t}});\n\t}\n\n\treturn <>\n\t\t<BlockEdit {...props} />\n\t\t<InspectorControls>\n\t\t\t<PanelBody title=\"Carousel Options\">\n\t\t\t<CheckboxControl\n\t\t\t\tlabel=\"Show Two\"\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tchecked={attributes?.isTwoUp || false}\n\t\t\t\tonChange={(value) => {\n\t\t\t\t\tsetAttributes({ isTwoUp: value });\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<CheckboxControl\n\t\t\t\tlabel=\"Peek\"\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tchecked={attributes?.isPeek || false}\n\t\t\t\tonChange={(value) => {\n\t\t\t\t\tsetAttributes({ isPeek: value });\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<CheckboxControl\n\t\t\t\tlabel=\"Auto Play\"\n\t\t\t\t__nextHasNoMarginBottom\n\t\t\t\tchecked={attributes?.isAutoPlay || false}\n\t\t\t\tonChange={(value) => {\n\t\t\t\t\tsetAttributes({ isAutoPlay: value });\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<FormTokenField\n  \t\t\t\t__next40pxDefaultSize\n   \t\t\t\t__nextHasNoMarginBottom\n\t\t\t\t__experimentalExpandOnFocus\n\t\t\t\t__experimentalShowHowTo = {false}\n   \t\t\t\tlabel={ queryPostType.charAt(0).toUpperCase() + queryPostType.slice(1) + \"s\" }\n   \t\t\t\tonChange={onSetPosts}\n   \t\t\t\tsuggestions={ postOptions }\n  \t\t\t\tvalue={selectedPostsLabels}\n \t\t\t/>\n\t\t</PanelBody>\n\t\t</InspectorControls>\n\t</>\n};\n\naddFilter(\"editor.BlockEdit\", \"core/query\", withQueryCarouselControls);\n"],"names":["addFilter","InspectorControls","PanelBody","CheckboxControl","FormTokenField","registerBlockVariation","useSelect","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","name","title","description","isActive","icon","attributes","namespace","className","isAutoPlay","innerBlocks","scope","keywords","withQueryCarouselControls","BlockEdit","props","setAttributes","queryPostType","query","postType","selectedPosts","initialSelectedPostsRef","current","posts","select","getEntityRecords","per_page","postOptions","map","post","rendered","sort","a","b","localeCompare","selectedPostsLabels","postId","find","id","onSetPosts","values","length","push","value","children","label","__nextHasNoMarginBottom","checked","isTwoUp","onChange","isPeek","__next40pxDefaultSize","__experimentalExpandOnFocus","__experimentalShowHowTo","charAt","toUpperCase","slice","suggestions"],"sourceRoot":""}