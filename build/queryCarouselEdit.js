(()=>{"use strict";const e=window.wp.hooks,o=window.wp.blockEditor,t=window.wp.components,s=window.wp.blocks,r=window.wp.data,n=window.wp.element,l=window.ReactJSXRuntime;(0,s.registerBlockVariation)("core/query",{name:"carousel-query-loop",title:"Carousel Query Loop",description:"A Query Loop variation that uses a carousel layout.",isActive:["namespace"],icon:"images-alt2",attributes:{namespace:"carousel-query-loop",className:"is-carousel-query",isAutoPlay:!0},innerBlocks:[["core/post-template",{},[["core/post-title",{}]]]],scope:["inserter"],keywords:["carousel","slider","query"]}),(0,e.addFilter)("editor.BlockEdit","core/query",(e=>s=>{if("carousel-query-loop"!==s.attributes?.namespace)return(0,l.jsx)(e,{...s});const{attributes:a,setAttributes:i}=s,c=a?.query?.postType||"post",u=a?.query?.selectedPosts||[],p=(0,n.useRef)(c);(0,n.useEffect)((()=>{p.current!==c&&i({query:{...a.query,selectedPosts:[]}})}),[a?.query?.postType]);const d=(0,r.useSelect)((e=>e("core").getEntityRecords("postType",c,{per_page:-1})),[a?.query?.postType]),y=(null!=d?d:[]).map((e=>e.title.rendered)).sort(((e,o)=>e.localeCompare(o))),w=d?u.map((e=>{const o=d.find((o=>o.id===e));return o?o.title.rendered:null})):[];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e,{...s}),(0,l.jsx)(o.InspectorControls,{children:(0,l.jsxs)(t.PanelBody,{title:"Carousel Options",children:[(0,l.jsx)(t.CheckboxControl,{label:"Show Two",__nextHasNoMarginBottom:!0,checked:a?.isTwoUp||!1,onChange:e=>{i({isTwoUp:e})}}),(0,l.jsx)(t.CheckboxControl,{label:"Peek",__nextHasNoMarginBottom:!0,checked:a?.isPeek||!1,onChange:e=>{i({isPeek:e})}}),(0,l.jsx)(t.CheckboxControl,{label:"Auto Play",__nextHasNoMarginBottom:!0,checked:a?.isAutoPlay||!1,onChange:e=>{i({isAutoPlay:e})}}),(0,l.jsx)(t.FormTokenField,{__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0,__experimentalExpandOnFocus:!0,__experimentalShowHowTo:!1,label:c.charAt(0).toUpperCase()+c.slice(1)+"s",onChange:e=>{w.length=0,a.query.selectedPosts=[],e&&0!==e.length?(w.push(...e),a.query.selectedPosts=e.map((e=>{const o=d.find((o=>o.title.rendered===e));return o?o.id:null})),i({query:{...a.query}})):i({query:{...a.query}})},suggestions:y,value:w})]})})]})}))})();